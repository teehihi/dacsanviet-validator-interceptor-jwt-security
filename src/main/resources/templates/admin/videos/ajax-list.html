<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/admin}">

<head>
	<title>Quản Lý Videos (AJAX)</title>
</head>

<body>
	<h4 layout:fragment="page-title">Quản Lý Videos (AJAX)</h4>
	<div layout:fragment="content">
		<!-- Alert Container -->
		<div id="alertContainer"></div>

		<!-- Action Bar -->
		<div class="action-bar">
			<div class="search-input-group">
				<i class="fas fa-search search-icon"></i>
				<input type="text" id="searchInput" class="search-input" placeholder="Tìm kiếm video..."
					onkeyup="searchVideos()">
				<button onclick="loadVideos()" class="btn-search">Tìm kiếm</button>
				<button onclick="document.getElementById('searchInput').value=''; searchKeyword=''; loadVideos();"
					class="btn-reset">
					<i class="fas fa-redo"></i>
				</button>
			</div>
			<div class="d-flex align-items-center gap-3">
				<select class="form-select" id="pageSize" onchange="loadVideos()"
					style="width: 150px; background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.1); color: #e2e8f0; border-radius: 8px; padding: 8px 12px;">
					<option value="4">4 videos/trang</option>
					<option value="8" selected>8 videos/trang</option>
					<option value="12">12 videos/trang</option>
				</select>
				<button class="btn-add" onclick="showAddModal()">
					<i class="fas fa-plus me-2"></i>Thêm Video Mới
				</button>
			</div>
		</div>

		<!-- Loading Spinner -->
		<div class="loading-spinner" id="loadingSpinner">
			<div class="spinner-border text-primary" style="width: 3rem; height: 3rem;">
				<span class="visually-hidden">Loading...</span>
			</div>
			<p class="mt-3 text-muted">Đang tải dữ liệu...</p>
		</div>

		<!-- Videos Grid -->
		<div class="row g-4" id="videosContainer">
			<!-- Videos will be loaded here via AJAX -->
		</div>

		<!-- Pagination -->
		<div class="pagination-container mt-4">
			<nav>
				<ul class="pagination" id="pagination">
					<!-- Pagination will be loaded here -->
				</ul>
			</nav>
		</div>

		<!-- Add/Edit Modal -->
		<div class="modal fade" id="videoModal" tabindex="-1">
			<div class="modal-dialog modal-lg">
				<div class="modal-content bg-dark text-white">
					<div class="modal-header border-secondary">
						<h5 class="modal-title" id="modalTitle">Thêm Video Mới</h5>
						<button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
					</div>
					<div class="modal-body">
						<form id="videoForm" enctype="multipart/form-data">
							<input type="hidden" id="videold" name="videold">

							<div class="row">
								<div class="col-md-8 mb-3">
									<label class="form-label">Tiêu đề <span class="text-danger">*</span></label>
									<input type="text" class="form-control" id="title" name="title" required>
								</div>
								<div class="col-md-4 mb-3">
									<label class="form-label">Trạng thái</label>
									<select class="form-select" id="active" name="active">
										<option value="true">Active</option>
										<option value="false">Inactive</option>
									</select>
								</div>
							</div>

							<div class="mb-3">
								<label class="form-label">Mô tả</label>
								<textarea class="form-control" id="description" name="description" rows="3"></textarea>
							</div>

							<div class="row">
								<div class="col-md-6 mb-3">
									<label class="form-label">Danh mục <span class="text-danger">*</span></label>
									<select class="form-select" id="categoryId" name="categoryId" required>
										<option value="">-- Chọn danh mục --</option>
										<option th:each="cat : ${categories}" th:value="${cat.categoryId}"
											th:text="${cat.categoryname}"></option>
									</select>
								</div>
								<div class="col-md-6 mb-3">
									<label class="form-label">Poster</label>
									<input type="file" class="form-control" id="poster" name="poster" accept="image/*">
									<small class="text-muted">Để trống nếu không muốn thay đổi</small>
								</div>
							</div>

							<div id="currentPosterPreview" style="display: none;">
								<label class="form-label">Poster hiện tại:</label>
								<div>
									<img id="currentPosterImg" src="" alt="Current poster"
										style="max-width: 200px; border-radius: 8px;">
								</div>
							</div>
						</form>
					</div>
					<div class="modal-footer border-secondary">
						<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
						<button type="button" class="btn btn-primary" onclick="saveVideo()">
							<i class="fas fa-save me-2"></i>Lưu
						</button>
					</div>
				</div>
			</div>
		</div>

	</div>

	<th:block layout:fragment="scripts">
		<script>
			console.log('=== AJAX Video Page Script Loading ===');

			// Global variables
			var currentPage = 0;
			var pageSize = 12;
			var searchKeyword = '';
			var videoModal = null;


			// Inject JWT token from Thymeleaf
			var jwtToken = '[[${jwtToken}]]';

			// Load videos with AJAX
			function loadVideos(page) {
				if (page === undefined) page = 0;
				currentPage = page;

				var pageSizeElement = document.getElementById('pageSize');
				if (pageSizeElement) {
					pageSize = pageSizeElement.value;
				}

				showLoading(true);

				var url = '/api/video?page=' + page + '&size=' + pageSize + '&sort=videold';
				if (searchKeyword) {
					url += '&title=' + encodeURIComponent(searchKeyword);
				}

				console.log('Loading videos from:', url);

				fetch(url, {
					headers: {
						'Authorization': 'Bearer ' + jwtToken
					}
				})
					.then(response => response.json())
					.then(data => {
						console.log('Response:', data);
						if (data.status) {
							renderVideos(data.body.content);
							renderPagination(data.body);
						} else {
							showAlert('error', data.message);
						}
					})
					.catch(error => {
						console.error('Error:', error);
						showAlert('error', 'Lỗi khi tải dữ liệu');
					})
					.finally(() => {
						showLoading(false);
					});
			}

			// Render videos
			function renderVideos(videos) {
				var container = document.getElementById('videosContainer');

				if (!videos || videos.length === 0) {
					container.innerHTML = '<div class="col-12 text-center py-5">' +
						'<i class="fas fa-video fa-3x text-muted mb-3"></i>' +
						'<p class="text-muted">Không tìm thấy video nào</p>' +
						'</div>';
					return;
				}

				var html = '';
				videos.forEach(function (video) {
					var posterUrl = video.poster ? '/uploads/' + video.poster : 'https://files.catbox.moe/h2xij8.png';
					var categoryName = video.category ? video.category.categoryname : 'N/A';
					var description = video.description || 'Không có mô tả';
					var views = video.views || 0;
					var activeClass = video.active ? 'badge-active' : 'badge-inactive';
					var activeText = video.active ? 'Active' : 'Inactive';
					var safeTitle = video.title.replace(/'/g, "\\'").replace(/"/g, '&quot;');

					html += '<div class="col-md-6 col-lg-4 col-xl-3">' +
						'<div class="video-card">' +
						'<div class="video-poster-wrapper">' +
						'<img src="' + posterUrl + '" class="video-poster" alt="' + video.title + '" onerror="this.onerror=null; this.src=\'https://files.catbox.moe/h2xij8.png\';">' +
						'</div>' +
						'<div class="video-card-body">' +
						'<h6 class="video-title">' + video.title + '</h6>' +
						'<p class="video-description">' + description + '</p>' +
						'<div class="video-meta">' +
						'<span class="views-badge"><i class="fas fa-eye me-1"></i>' + views + '</span>' +
						'<span class="badge ' + activeClass + '">' + activeText + '</span>' +
						'</div>' +
						'<div class="video-category">' +
						'<i class="fas fa-folder me-1"></i>' + categoryName +
						'</div>' +
						'<div class="video-actions">' +
						'<button class="btn-action btn-edit" onclick="showEditModal(' + video.videold + ')">' +
						'<i class="fas fa-edit me-1"></i>Sửa' +
						'</button>' +
						'<button class="btn-action btn-delete" onclick="deleteVideo(' + video.videold + ', \'' + safeTitle + '\')">' +
						'<i class="fas fa-trash me-1"></i>Xóa' +
						'</button>' +
						'</div>' +
						'</div>' +
						'</div>' +
						'</div>';
				});

				container.innerHTML = html;
			}

			// Render pagination
			function renderPagination(pageData) {
				const pagination = document.getElementById('pagination');
				const totalPages = pageData.totalPages;
				const currentPageNum = pageData.number;

				if (totalPages <= 1) {
					pagination.innerHTML = '';
					return;
				}

				let html = '';

				// Previous button
				const prevDisabled = currentPageNum === 0 ? 'disabled' : '';
				html += '<li class="page-item ' + prevDisabled + '">' +
					'<a class="page-link" href="#" onclick="if(' + currentPageNum + ' > 0) { loadVideos(' + (currentPageNum - 1) + '); } return false;">' +
					'<i class="fas fa-chevron-left"></i>' +
					'</a>' +
					'</li>';

				// Page numbers
				for (var i = 0; i < totalPages; i++) {
					if (i === 0 || i === totalPages - 1 || (i >= currentPageNum - 2 && i <= currentPageNum + 2)) {
						const activeClass = i === currentPageNum ? 'active' : '';
						html += '<li class="page-item ' + activeClass + '">' +
							'<a class="page-link" href="#" onclick="loadVideos(' + i + '); return false;">' +
							(i + 1) +
							'</a>' +
							'</li>';
					} else if (i === currentPageNum - 3 || i === currentPageNum + 3) {
						html += '<li class="page-item disabled"><span class="page-link">...</span></li>';
					}
				}

				// Next button
				const nextDisabled = currentPageNum === totalPages - 1 ? 'disabled' : '';
				html += '<li class="page-item ' + nextDisabled + '">' +
					'<a class="page-link" href="#" onclick="if(' + currentPageNum + ' < ' + (totalPages - 1) + ') { loadVideos(' + (currentPageNum + 1) + '); } return false;">' +
					'<i class="fas fa-chevron-right"></i>' +
					'</a>' +
					'</li>';

				pagination.innerHTML = html;
			}

			// Search videos with debounce
			var searchTimeout;
			function searchVideos() {
				clearTimeout(searchTimeout);
				searchTimeout = setTimeout(function () {
					searchKeyword = document.getElementById('searchInput').value.trim();
					loadVideos(0);
				}, 500);
			}

			// Show add modal
			function showAddModal() {
				console.log('showAddModal called, videoModal:', videoModal);

				if (!videoModal) {
					console.log('Modal not initialized, initializing now...');
					var modalElement = document.getElementById('videoModal');
					if (modalElement && typeof bootstrap !== 'undefined') {
						videoModal = new bootstrap.Modal(modalElement);
					}
				}

				document.getElementById('modalTitle').textContent = 'Thêm Video Mới';
				document.getElementById('videoForm').reset();
				document.getElementById('videold').value = '';
				document.getElementById('active').checked = true;
				document.getElementById('currentPosterPreview').style.display = 'none';

				if (videoModal) {
					videoModal.show();
				} else {
					alert('Lỗi: Không thể mở modal. Vui lòng refresh trang.');
				}
			}

			// Show edit modal
			function showEditModal(id) {
				document.getElementById('modalTitle').textContent = 'Chỉnh Sửa Video';

				fetch('/api/video/getVideo', {
					method: 'POST',
					headers: {
						'Content-Type': 'application/x-www-form-urlencoded',
						'Authorization': 'Bearer ' + jwtToken
					},
					body: 'id=' + id
				})
					.then(function (response) { return response.json(); })
					.then(function (data) {
						if (data.status) {
							var video = data.body;
							document.getElementById('videold').value = video.videold;
							document.getElementById('title').value = video.title;
							document.getElementById('description').value = video.description || '';
							document.getElementById('categoryId').value = video.category ? video.category.categoryId : '';
							document.getElementById('active').checked = video.active;

							if (video.poster) {
								document.getElementById('currentPosterPreview').style.display = 'block';
								document.getElementById('currentPosterImg').src = '/uploads/' + video.poster;
							} else {
								document.getElementById('currentPosterPreview').style.display = 'none';
							}

							videoModal.show();
						} else {
							showAlert('error', data.message);
						}
					})
					.catch(function (error) {
						console.error('Error:', error);
						showAlert('error', 'Lỗi khi tải thông tin video');
					});
			}

			// Save video (Add or Update)
			function saveVideo() {
				var videold = document.getElementById('videold').value;
				var formData = new FormData();

				formData.append('title', document.getElementById('title').value);
				formData.append('description', document.getElementById('description').value);
				formData.append('categoryId', document.getElementById('categoryId').value);
				formData.append('active', document.getElementById('active').checked);

				var posterFile = document.getElementById('poster').files[0];
				if (posterFile) {
					formData.append('poster', posterFile);
				}

				var url, method;
				if (videold) {
					// Update
					url = '/api/video/updateVideo';
					method = 'PUT';
					formData.append('videold', videold);
				} else {
					// Add
					url = '/api/video/addVideo';
					method = 'POST';
				}

				fetch(url, {
					method: method,
					headers: {
						'Authorization': 'Bearer ' + jwtToken
					},
					body: formData
				})
					.then(function (response) { return response.json(); })
					.then(function (data) {
						if (data.status) {
							showAlert('success', data.message);
							videoModal.hide();
							loadVideos(currentPage);
						} else {
							showAlert('error', data.message);
						}
					})
					.catch(function (error) {
						console.error('Error:', error);
						showAlert('error', 'Lỗi khi lưu video');
					});
			}

			// Delete video
			function deleteVideo(id, title) {
				console.log('deleteVideo called:', id, title);

				// Use browser confirm for simplicity
				if (!confirm('Bạn có chắc chắn muốn xóa video "' + title + '"?')) {
					console.log('Delete cancelled by user');
					return;
				}

				console.log('Performing delete for video:', id);
				var formData = new FormData();
				formData.append('videold', id);

				fetch('/api/video/deleteVideo', {
					method: 'DELETE',
					headers: {
						'Authorization': 'Bearer ' + jwtToken
					},
					body: formData
				})
					.then(function (response) {
						console.log('Delete response status:', response.status);
						return response.json();
					})
					.then(function (data) {
						console.log('Delete response data:', data);
						if (data.status) {
							showAlert('success', data.message);
							loadVideos(currentPage);
						} else {
							showAlert('error', data.message);
						}
					})
					.catch(function (error) {
						console.error('Delete error:', error);
						showAlert('error', 'Lỗi khi xóa video: ' + error.message);
					});
			}

			// Show loading
			function showLoading(show) {
				var spinner = document.getElementById('loadingSpinner');
				var container = document.getElementById('videosContainer');

				if (show) {
					spinner.classList.add('active');
					container.style.opacity = '0.5';
				} else {
					spinner.classList.remove('active');
					container.style.opacity = '1';
				}
			}

			// Show alert
			function showAlert(type, message) {
				var container = document.getElementById('alertContainer');
				var alertDiv = document.createElement('div');
				var alertClass = type === 'success' ? 'alert-success' : 'alert-danger';
				var iconClass = type === 'success' ? 'fa-check-circle' : 'fa-exclamation-circle';

				alertDiv.className = 'alert ' + alertClass + ' alert-dismissible fade show';
				alertDiv.innerHTML = '<i class="fas ' + iconClass + ' me-2"></i>' +
					'<span>' + message + '</span>' +
					'<button type="button" class="btn-close" data-bs-dismiss="alert"></button>';

				container.appendChild(alertDiv);

				setTimeout(function () {
					alertDiv.remove();
				}, 3000);
			}

			// Initialize when script loads
			console.log('All functions defined, initializing...');

			// Wait for Bootstrap to be ready
			var initAttempts = 0;
			var maxAttempts = 20;

			function initWhenReady() {
				initAttempts++;
				console.log('initWhenReady attempt', initAttempts);

				if (initAttempts > maxAttempts) {
					console.error('Failed to initialize after', maxAttempts, 'attempts');
					return;
				}

				if (typeof bootstrap === 'undefined') {
					console.log('Bootstrap not ready, retrying...');
					setTimeout(initWhenReady, 100);
					return;
				}

				var modalElement = document.getElementById('videoModal');
				if (!modalElement) {
					console.log('Modal element not found, retrying...');
					setTimeout(initWhenReady, 100);
					return;
				}

				// Initialize modal
				videoModal = new bootstrap.Modal(modalElement);
				console.log('✓ Modal initialized');

				// Load videos
				console.log('Loading videos...');
				loadVideos(0);
			}

			// Start initialization
			setTimeout(initWhenReady, 100);
		</script>

		<style>
			/* Alert Styles */
			.alert {
				border-radius: 12px;
				border: none;
				padding: 15px 20px;
				margin-bottom: 20px;
			}

			.alert-success {
				background: rgba(56, 239, 125, 0.1);
				color: #38ef7d;
				border: 1px solid rgba(56, 239, 125, 0.2);
			}

			.alert-danger {
				background: rgba(245, 87, 108, 0.1);
				color: #f5576c;
				border: 1px solid rgba(245, 87, 108, 0.2);
			}

			/* Action Bar */
			.action-bar {
				display: flex;
				justify-content: space-between;
				align-items: center;
				margin-bottom: 25px;
				gap: 20px;
				flex-wrap: wrap;
			}

			.search-input-group {
				display: flex;
				align-items: center;
				background: rgba(255, 255, 255, 0.03);
				border: 1px solid rgba(255, 255, 255, 0.1);
				border-radius: 12px;
				padding: 8px 12px;
				gap: 10px;
				flex: 1;
				max-width: 600px;
			}

			.search-icon {
				color: #8b9bb4;
				font-size: 1rem;
			}

			.search-input {
				flex: 1;
				background: transparent;
				border: none;
				color: #e2e8f0;
				padding: 8px;
				outline: none;
			}

			.search-input::placeholder {
				color: #8b9bb4;
			}

			.btn-search,
			.btn-reset {
				background: rgba(255, 87, 34, 0.1);
				border: 1px solid rgba(255, 87, 34, 0.3);
				color: #ff8a50;
				padding: 8px 20px;
				border-radius: 8px;
				cursor: pointer;
				transition: all 0.3s;
				text-decoration: none;
				display: inline-flex;
				align-items: center;
				justify-content: center;
			}

			.btn-reset {
				padding: 8px 12px;
			}

			.btn-search:hover,
			.btn-reset:hover {
				background: rgba(255, 87, 34, 0.2);
				border-color: #ff5722;
			}

			.btn-add {
				background: linear-gradient(135deg, #ff5722, #ff8a50);
				color: #fff;
				padding: 12px 24px;
				border-radius: 12px;
				text-decoration: none;
				font-weight: 600;
				transition: all 0.3s;
				box-shadow: 0 4px 15px rgba(255, 87, 34, 0.3);
				border: none;
				cursor: pointer;
			}

			.btn-add:hover {
				transform: translateY(-2px);
				box-shadow: 0 6px 20px rgba(255, 87, 34, 0.4);
				color: #fff;
			}

			/* Video Cards */
			.video-card {
				background: rgba(255, 255, 255, 0.02);
				border: 1px solid rgba(255, 255, 255, 0.1);
				border-radius: 12px;
				overflow: hidden;
				transition: all 0.3s;
				height: 100%;
				display: flex;
				flex-direction: column;
			}

			.video-card:hover {
				transform: translateY(-5px);
				box-shadow: 0 10px 30px rgba(255, 87, 34, 0.3);
				background: rgba(255, 87, 34, 0.05);
			}

			.video-poster-wrapper {
				width: 100%;
				height: 200px;
				overflow: hidden;
				background: rgba(0, 0, 0, 0.3);
			}

			.video-poster {
				width: 100%;
				height: 100%;
				object-fit: cover;
				transition: transform 0.3s;
			}

			.video-card:hover .video-poster {
				transform: scale(1.05);
			}

			.video-card-body {
				padding: 15px;
				flex: 1;
				display: flex;
				flex-direction: column;
			}

			.video-title {
				color: #fff;
				font-weight: 600;
				font-size: 1rem;
				margin-bottom: 8px;
				overflow: hidden;
				text-overflow: ellipsis;
				display: -webkit-box;
				-webkit-line-clamp: 2;
				-webkit-box-orient: vertical;
				min-height: 48px;
			}

			.video-description {
				color: #8b9bb4;
				font-size: 0.85rem;
				margin-bottom: 12px;
				overflow: hidden;
				text-overflow: ellipsis;
				display: -webkit-box;
				-webkit-line-clamp: 2;
				-webkit-box-orient: vertical;
				min-height: 40px;
			}

			.video-meta {
				display: flex;
				justify-content: space-between;
				align-items: center;
				margin-bottom: 10px;
			}

			.views-badge {
				background: rgba(255, 193, 7, 0.2);
				color: #ffc107;
				padding: 4px 10px;
				border-radius: 6px;
				font-size: 0.8rem;
				font-weight: 600;
				display: inline-flex;
				align-items: center;
			}

			.badge {
				padding: 4px 10px;
				border-radius: 6px;
				font-size: 0.8rem;
				font-weight: 600;
			}

			.badge-active {
				background: rgba(56, 239, 125, 0.2);
				color: #38ef7d;
			}

			.badge-inactive {
				background: rgba(245, 87, 108, 0.2);
				color: #f5576c;
			}

			.video-category {
				color: #8b9bb4;
				font-size: 0.85rem;
				margin-bottom: 12px;
				padding: 6px 0;
				border-top: 1px solid rgba(255, 255, 255, 0.05);
				padding-top: 10px;
			}

			.video-actions {
				display: flex;
				gap: 8px;
				margin-top: auto;
			}

			.btn-action {
				flex: 1;
				padding: 8px 12px;
				border-radius: 8px;
				font-size: 0.85rem;
				font-weight: 600;
				border: 1px solid;
				cursor: pointer;
				transition: all 0.3s;
				display: inline-flex;
				align-items: center;
				justify-content: center;
			}

			.btn-edit {
				background: rgba(102, 126, 234, 0.1);
				color: #667eea;
				border-color: rgba(102, 126, 234, 0.3);
			}

			.btn-edit:hover {
				background: rgba(102, 126, 234, 0.2);
				transform: translateY(-2px);
			}

			.btn-delete {
				background: rgba(245, 87, 108, 0.1);
				color: #f5576c;
				border-color: rgba(245, 87, 108, 0.3);
			}

			.btn-delete:hover {
				background: rgba(245, 87, 108, 0.2);
				transform: translateY(-2px);
			}

			/* Loading Spinner */
			.loading-spinner {
				display: none;
				text-align: center;
				padding: 40px;
			}

			.loading-spinner.active {
				display: block;
			}

			/* Pagination */
			.pagination-container {
				display: flex;
				justify-content: center;
			}

			.pagination {
				display: flex;
				gap: 8px;
				list-style: none;
				padding: 0;
				margin: 0;
			}

			.page-item.disabled .page-link {
				opacity: 0.5;
				pointer-events: none;
			}

			.page-link {
				background: rgba(255, 255, 255, 0.03);
				border: 1px solid rgba(255, 255, 255, 0.1);
				color: #e2e8f0;
				padding: 10px 15px;
				border-radius: 8px;
				text-decoration: none;
				transition: all 0.3s;
				min-width: 40px;
				text-align: center;
				display: block;
			}

			.page-link:hover {
				background: rgba(255, 87, 34, 0.1);
				border-color: rgba(255, 87, 34, 0.3);
				color: #ff8a50;
			}

			.page-item.active .page-link {
				background: linear-gradient(135deg, #ff5722, #ff8a50);
				border-color: #ff5722;
				color: #fff;
			}

			/* Modal Styles */
			.modal-content {
				background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
				border: 1px solid rgba(255, 255, 255, 0.08);
				border-radius: 20px;
				overflow: hidden;
			}

			.modal-header-custom {
				background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
				padding: 20px 30px;
				display: flex;
				justify-content: space-between;
				align-items: center;
				color: #fff;
			}

			.modal-body-custom {
				padding: 30px;
			}

			.modal-footer-custom {
				padding: 20px 30px;
				border-top: 1px solid rgba(255, 255, 255, 0.1);
				display: flex;
				gap: 15px;
				justify-content: flex-end;
			}

			.form-group-custom {
				margin-bottom: 0;
			}

			.form-label-custom {
				display: block;
				color: #e2e8f0;
				font-weight: 600;
				margin-bottom: 10px;
				font-size: 0.95rem;
			}

			.required {
				color: #f5576c;
			}

			.form-input-custom,
			.form-select-custom,
			.form-textarea-custom {
				width: 100%;
				padding: 14px 18px;
				background: rgba(255, 255, 255, 0.05);
				border: 2px solid rgba(255, 255, 255, 0.1);
				border-radius: 12px;
				color: #e2e8f0;
				font-size: 0.95rem;
				transition: all 0.3s;
			}

			.form-input-custom:focus,
			.form-select-custom:focus,
			.form-textarea-custom:focus {
				outline: none;
				border-color: #fa709a;
				background: rgba(255, 255, 255, 0.08);
				box-shadow: 0 0 0 4px rgba(250, 112, 154, 0.1);
			}

			.form-input-custom::placeholder,
			.form-textarea-custom::placeholder {
				color: #64748b;
			}

			.form-textarea-custom {
				resize: vertical;
				min-height: 80px;
			}

			.checkbox-card-custom {
				background: rgba(255, 255, 255, 0.05);
				border: 2px solid rgba(255, 255, 255, 0.1);
				border-radius: 12px;
				padding: 14px 18px;
				transition: all 0.3s;
				cursor: pointer;
			}

			.checkbox-card-custom:has(.checkbox-input-custom:checked) {
				background: rgba(250, 112, 154, 0.1);
				border-color: #fa709a;
			}

			.checkbox-input-custom {
				display: none;
			}

			.checkbox-label-custom {
				color: #e2e8f0;
				font-weight: 600;
				cursor: pointer;
				margin: 0;
				display: flex;
				align-items: center;
			}

			.btn-submit-custom {
				flex: 1;
				padding: 12px 24px;
				background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
				color: #fff;
				border: none;
				border-radius: 12px;
				font-weight: 600;
				cursor: pointer;
				transition: all 0.3s;
				box-shadow: 0 4px 15px rgba(250, 112, 154, 0.3);
			}

			.btn-submit-custom:hover {
				transform: translateY(-2px);
				box-shadow: 0 6px 20px rgba(250, 112, 154, 0.4);
			}

			.btn-cancel-custom {
				padding: 12px 24px;
				background: rgba(255, 255, 255, 0.05);
				color: #8b9bb4;
				border: 2px solid rgba(255, 255, 255, 0.1);
				border-radius: 12px;
				font-weight: 600;
				transition: all 0.3s;
			}

			.btn-cancel-custom:hover {
				background: rgba(255, 255, 255, 0.08);
				border-color: rgba(255, 255, 255, 0.2);
				color: #e2e8f0;
			}

			.text-danger {
				color: #f5576c !important;
			}

			.text-muted {
				color: #8b9bb4 !important;
			}
		</style>
	</th:block>
</body>

</html>